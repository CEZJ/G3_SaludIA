<div class="layout-wrapper">

  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="brand">
      <img src="assets/img.png" class="logo" alt="logo" />
      <div><h2>Salud AI</h2><small>Alerta Infecciosa</small></div>
    </div>
    <div class="status"><span class="dot"></span> Activo <span class="sep">|</span> <span class="patients">Panel Admin</span></div>

    <nav class="menu">
      <a routerLink="/inicio-admin" class="menu-item"><span class="icon-circle" style="color:#4f46e5; background:#eef2ff;"><mat-icon>home</mat-icon></span>Inicio</a>
      <a routerLink="/admin-gestionar-usuarios-component" class="menu-item"><span class="icon-circle" style="color:#06b6d4; background:#ecfeff;"><mat-icon>group</mat-icon></span>Usuarios</a>
      <a routerLink="/admin-gestionar-sintomas-component" class="menu-item active-menu" style="background-color: #f1f5f9; font-weight: 600; color: #166534;"><span class="icon-circle" style="color:#22c55e; background:#f0fdf4;"><mat-icon>coronavirus</mat-icon></span>Síntomas</a>
      <a routerLink="/admin-gestionar-enfermedades-component" class="menu-item"><span class="icon-circle" style="color:#9333ea; background:#faf5ff;"><mat-icon>science</mat-icon></span>Enfermedades</a>
      <a routerLink="/admin-ubicaciones-component" class="menu-item"><span class="icon-circle" style="color:#f97316; background:#fff7ed;"><mat-icon>location_on</mat-icon></span>Ubicaciones</a>
      <a routerLink="/admin-configuracion-component" class="menu-item"><span class="icon-circle" style="color:#64748b; background:#f1f5f9;"><mat-icon>settings</mat-icon></span>Ajustes</a>
    </nav>
    <a routerLink="/login" class="logout"><mat-icon>logout</mat-icon>Cerrar Sesión</a>
  </aside>

  <!-- CONTENIDO -->
  <main class="content-container">

    <div class="dashboard-header-card">
      <div class="header-top">
        <div class="header-info">
          <div class="icon-box"><mat-icon>monitor_heart</mat-icon></div>
          <div>
            <h2>Lista de Síntomas</h2>
            <p>Registro médico de síntomas y manifestaciones clínicas</p>
          </div>
        </div>
        <!-- Botón CREAR -->
        <button class="btn-new" (click)="abrirDialogo()">
          <mat-icon>add</mat-icon> Nuevo Síntoma
        </button>
      </div>

      <div class="stats-row">
        <div class="stat-box">
          <div class="stat-icon-bg"><mat-icon>description</mat-icon></div>
          <div><span class="stat-number">{{ totalSintomas }}</span><span class="stat-label">Total Síntomas</span></div>
        </div>
        <div class="stat-box">
          <div class="stat-icon-bg purple"><mat-icon>update</mat-icon></div>
          <div><span class="stat-number">DB</span><span class="stat-label">Conectado</span></div>
        </div>
      </div>
    </div>

    <!-- FILTROS -->
    <div class="filters-container">
      <div class="filter-item">
        <label># BUSCAR POR ID</label>
        <div class="input-wrapper"><mat-icon>tag</mat-icon><input type="text" placeholder="123" [(ngModel)]="filterId" (input)="applyFilter()"></div>
      </div>
      <div class="filter-item wide">
        <label>Q BUSCAR POR NOMBRE</label>
        <div class="input-wrapper"><mat-icon>search</mat-icon><input type="text" placeholder="Nombre del síntoma" [(ngModel)]="filterName" (input)="applyFilter()"></div>
      </div>
    </div>

    <!-- TABLA -->
    <div class="table-container">

      <div *ngIf="isLoading" style="padding: 20px; display: flex; justify-content: center;">
        <mat-spinner diameter="40"></mat-spinner>
      </div>

      <table *ngIf="!isLoading">
        <thead>
        <tr>
          <th>ID</th>
          <th>NOMBRE DEL SÍNTOMA</th>
          <th style="text-align: right;">ACCIONES</th>
        </tr>
        </thead>
        <tbody>

        <tr *ngFor="let s of filteredSintomas">
          <td style="width: 100px;">
            <span class="id-badge"># {{ s.id }}</span>
          </td>

          <td>
            <div class="name-cell">
              <div class="mini-icon"><mat-icon>show_chart</mat-icon></div>
              <span class="text-bold">{{ s.nombre }}</span>
            </div>
          </td>

          <td style="text-align: right;">
            <div style="display: flex; justify-content: flex-end; gap: 8px;">

              <!-- BOTÓN EDITAR (NUEVO) -->
              <!-- Al hacer clic, pasamos el objeto 's' a abrirDialogo -->
              <button class="btn-icon" (click)="abrirDialogo(s)" title="Editar"
                      style="background: white; border: 1px solid #cbd5e1; color: #475569; width: 36px; height: 36px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s;">
                <mat-icon style="font-size: 18px; width: 18px; height: 18px;">edit</mat-icon>
              </button>

              <!-- BOTÓN ELIMINAR -->
              <button class="btn-icon delete" (click)="eliminarSintoma(s.id)" title="Eliminar">
                <mat-icon>delete_outline</mat-icon>
              </button>

            </div>
          </td>
        </tr>

        <tr *ngIf="filteredSintomas.length === 0">
          <td colspan="3" class="no-data">
            <mat-icon>search_off</mat-icon>
            <p>No se encontraron síntomas.</p>
          </td>
        </tr>
        </tbody>
      </table>
    </div>

  </main>
</div>
